{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../sensors.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"ng2-charts\";\nexport let SensorCardComponent = /*#__PURE__*/(() => {\n  class SensorCardComponent {\n    constructor(sensorsService, el) {\n      this.sensorsService = sensorsService;\n      this.el = el;\n      this.history = [];\n      this.timeRange = 'day';\n      this.lineChartOptions = {\n        responsive: true,\n        scales: {\n          x: {\n            title: {\n              display: true,\n              text: 'Time'\n            }\n          },\n          y: {\n            title: {\n              display: true,\n              text: 'Value'\n            }\n          }\n        }\n      };\n    }\n    ngOnInit() {\n      this.loadHistory();\n    }\n    loadHistory() {\n      this.sensorsService.getSensorHistory(this.sensor.id, this.timeRange).subscribe({\n        next: data => {\n          this.history = data;\n          this.updateChart();\n        },\n        error: err => console.error('Failed to load history:', err)\n      });\n    }\n    updateChart() {\n      const labels = this.history.map(h => new Date(h.timestamp).toLocaleString());\n      const data = this.history.map(h => h.value);\n      this.lineChartData = {\n        labels,\n        datasets: [{\n          data,\n          label: `${this.sensor.name} (${this.timeRange})`,\n          borderColor: '#42A5F5',\n          fill: false,\n          tension: 0.3\n        }]\n      };\n    }\n    changeTimeRange(range) {\n      this.timeRange = range;\n      this.loadHistory();\n    }\n    toggleFullscreen() {\n      // const el = document.fullscreenElement ? document.exitFullscreen() : this.el.nativeElement.requestFullscreen();\n      if (!document.fullscreenElement) {\n        this.el.nativeElement.requestFullscreen();\n      } else {\n        document.exitFullscreen();\n      }\n    }\n    static {\n      this.ɵfac = function SensorCardComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SensorCardComponent)(i0.ɵɵdirectiveInject(i1.SensorsService), i0.ɵɵdirectiveInject(i0.ElementRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SensorCardComponent,\n        selectors: [[\"app-sensor-card\"]],\n        inputs: {\n          sensor: \"sensor\"\n        },\n        decls: 21,\n        vars: 6,\n        consts: [[1, \"sensor-card\"], [1, \"controls\"], [3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"hour\"], [\"value\", \"day\"], [\"value\", \"week\"], [\"value\", \"month\"], [2, \"display\", \"block\"], [3, \"click\"], [\"baseChart\", \"\", \"chartType\", \"line\", 3, \"data\", \"options\"]],\n        template: function SensorCardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\");\n            i0.ɵɵtext(2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"p\");\n            i0.ɵɵtext(4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 1)(6, \"label\");\n            i0.ɵɵtext(7, \"Range:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"select\", 2);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SensorCardComponent_Template_select_ngModelChange_8_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.timeRange, $event) || (ctx.timeRange = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function SensorCardComponent_Template_select_change_8_listener() {\n              return ctx.changeTimeRange(ctx.timeRange);\n            });\n            i0.ɵɵelementStart(9, \"option\", 3);\n            i0.ɵɵtext(10, \"Last Hour\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"option\", 4);\n            i0.ɵɵtext(12, \"Last Day\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"option\", 5);\n            i0.ɵɵtext(14, \"Last Week\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"option\", 6);\n            i0.ɵɵtext(16, \"Last Month\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(17, \"div\", 7)(18, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function SensorCardComponent_Template_button_click_18_listener() {\n              return ctx.toggleFullscreen();\n            });\n            i0.ɵɵtext(19, \"\\uD83D\\uDD0D\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(20, \"canvas\", 9);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.sensor.name);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate2(\"Current Value: \", ctx.sensor.value, \" \", ctx.sensor.unit, \"\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.timeRange);\n            i0.ɵɵadvance(12);\n            i0.ɵɵproperty(\"data\", ctx.lineChartData)(\"options\", ctx.lineChartOptions);\n          }\n        },\n        dependencies: [i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel, i3.BaseChartDirective],\n        styles: [\".sensor-card[_ngcontent-%COMP%]{border-radius:12px;background:#fff;padding:16px;margin:12px;box-shadow:0 4px 10px #0000001a;width:300px}.controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px}\"]\n      });\n    }\n  }\n  return SensorCardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}